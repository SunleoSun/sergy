// Generated by CoffeeScript 1.7.1
(function() {
  var AddItemForm;

  AddItemForm = (function() {
    function AddItemForm() {}

    AddItemForm.initCallbacks = function() {
      $('#addColor, #addMaterial').click(function() {
        var dropDown;
        dropDown = $(this).prev();
        return dropDown.after(dropDown.clone());
      });
      $('#deleteColor, #deleteMaterial').click(function() {
        return $(this).prev().prev().remove();
      });
      return $('#addItem').click(function() {
        var data, getManyValues;
        getManyValues = function(parent) {
          var child, children, _i, _len, _results;
          children = parent.children('.descr');
          _results = [];
          for (_i = 0, _len = children.length; _i < _len; _i++) {
            child = children[_i];
            _results.push(child.value);
          }
          return _results;
        };
        data = {
          AddItemForm: {
            name: $('#name').val(),
            width: $('#width').val(),
            length: $('#length').val(),
            diameter: $('#diameter').val(),
            price: $('#price').val(),
            description: $('#description').val(),
            category: $('#category').val(),
            colors: getManyValues($('.color')),
            materials: getManyValues($('.material'))
          }
        };
        $.post('/?r=site/additem', data, function(resData) {
          var child;
          if (resData["error"] != null) {
            child = '<div class="error-form">Введите имя</div>';
            return $('.description-data-left').prepend(child);
          } else {
            return document.body.innerHTML = resData;
          }
        });
      });
    };

    return AddItemForm;

  })();

  $(function() {
    return AddItemForm.initCallbacks();
  });

}).call(this);